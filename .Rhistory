ggplot(employment[employment$`Employment characteristics`%in%input$employment,],aes(x=reorder(`Value`,Proportion), y=Proportion, fill=`Category`))+
geom_bar(position="dodge", stat="identity")+
theme_bw()+
labs( y="Percent (%)", title="", x="Type of Earnings", fill="Type of Employment")+
geom_text(aes(label=paste0(Proportion,"%")), position=position_dodge(0.7),  hjust=-0.5, vjust=-0.5)+ylim(0,100)+
scale_fill_manual(values = c("#f46d43","#74add1"))+
theme(text=element_text(size=16))+
coord_flip()
#setwd("~/")
# load all the required packages
library(pacman)
p_load(shiny)
p_load(docxtractr)
p_load(flexdashboard)
p_load(tidyverse)
p_load(ggiraph)
p_load(scales)
p_load(sf)
p_load(reshape2)
p_load(cowplot)
p_load(data.table)
ggplot(employment[employment$`Employment characteristics`%in%input$employment,],aes(x=reorder(`Value`,Proportion), y=Proportion, fill=`Category`))+
geom_bar(position="dodge", stat="identity")+
theme_bw()+
labs( y="Percent (%)", title="", x="Type of Earnings", fill="Type of Employment")+
geom_text(aes(label=paste0(Proportion,"%")), position=position_dodge(0.7),  hjust=-0.5, vjust=-0.5)+ylim(0,100)+
scale_fill_manual(values = c("#f46d43","#74add1"))+
theme(text=element_text(size=16))+
coord_flip()
employment <-fread("data/table_3/table3_8_employment_by_background_xtics.csv") %>%
mutate(Proportion=ifelse(Proportion>0.5, round(Proportion), Proportion))
ggplot(employment[employment$`Employment characteristics`%in%input$employment,],aes(x=reorder(`Value`,Proportion), y=Proportion, fill=`Category`))+
geom_bar(position="dodge", stat="identity")+
theme_bw()+
labs( y="Percent (%)", title="", x="Type of Earnings", fill="Type of Employment")+
geom_text(aes(label=paste0(Proportion,"%")), position=position_dodge(0.7),  hjust=-0.5, vjust=-0.5)+ylim(0,100)+
scale_fill_manual(values = c("#f46d43","#74add1"))+
theme(text=element_text(size=16))+
coord_flip()
View(employment)
#import data
age_at_circumcision <- fread('data/table_18/table 18.3 Age at circumcision_longformat.csv')
age_at_circumcision$Category <- fct_relevel(age_at_circumcision$Category, "No education", "Primary", "Secondary", "More than secondary",
"Lowest", "Second", "Middle", "Fourth", "Highest")
age_at_circumcission_county <- fread('data/table_18/Table 18.3C Age at circumcision by county.csv')
age_at_circumcission_county <- full_join(county,age_at_circumcission_county,  by =c('Name'='County'))
View(age_at_circumcision)
#import data
circumcision_age <- fread("data/table_18/working_table_18_2_circumcision_by_age.csv")
median_age <- fread("data/table_5/Table 5.11 Median age at first birth.csv")
median_age$Variable<- fct_relevel(median_age$Variable,
"Lowest", "Second", "Middle", "Fourth", "Highest")
median_age_county <- fread("data/table_5/Table_6c Median.age.first.birth.csv")
median_age_county <- full_join(county, median_age_county, by="Name")
View(median_age)
table(median_age$Variable)
fertility_rates <- fread("data/table_6/Table 6.6  Wanted fertility rates.csv")
fertility_rates$Variable <- fct_relevel(fertility_rates$Variable,
"Lowest", "Second", "Middle", "Fourth", "Highest", "No education", "Primary", "Secondary")
View(fertility_rates)
fertility_preferences <- fread("data/table_7/table7_fertilitypreferences.csv")
View(fertility_preferences)
table(fertility_preferences$Desire_children)
children_number <- fread("data/table_6/Table 6.3  Ideal number of children by number of living children.csv")
View(children_number)
View(fertility_rates)
names(fertility_rates)
# import data
knowledge_fertile <- fread("data/table_7/Table_7.8_Knowledge of Fertile Period.csv")
View(knowledge_fertile)
# import data
need_demand <- fread("data/table_7/Table_7.15.1_2_Need and Demand for family planning.csv")
View(need_demand)
# import data
future_use_contraception <- fread("data/table_7/Table_7.19_Future_Contraception.csv")
View(future_use_contraception)
fp_messages <-fread("data/table_7/Table_7_20_1_2_Exposure to family planning.csv") %>%
mutate(proportion=ifelse(proportion>0.5, round(proportion), proportion))
View(fp_messages)
early_childhood_mortality <-fread("data/table_8/Table_8.3_Early_Childhood_Mortality.csv")
early_childhood_mortality_county <-fread("data/table_8/Table_8.3C_County Early Childhood Mortality.csv")
early_childhood_mortality_county <- full_join(county, early_childhood_mortality_county, by=c("Name"="county"))
View(early_childhood_mortality)
View(early_childhood_mortality_county)
perinatal_mortality <-fread("data/table_8/Table_8.4_Perinatal Mortality.csv") %>%
filter(category!="Pregnancies (28 weeks)")
perinatal_mortality_county <-fread("data/table_8/Table_8.4C_Perinatal Mortality By County.csv")
perinatal_mortality_county <- full_join(county, perinatal_mortality_county, by=c("Name"="county"))
View(perinatal_mortality)
